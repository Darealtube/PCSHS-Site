import {
  Typography,
  Fade,
  Container,
  Grid,
  useTheme,
  useMediaQuery,
  Box,
} from "@mui/material";
import Head from "next/head";
import Image, { StaticImageData } from "next/image";
import History from "../Components/About/Parts/History";
import VisibilitySensor from "react-visibility-sensor";
import Vision from "../public/pcshsPictures/vision.jpeg";
import Mission from "../public/pcshsPictures/mission.jpg";
import { ReactNode } from "react";
import ContactUs from "../Components/About/Parts/Contact";
import Objectives from "../Components/About/Parts/Objective";
import styles from "../styles/About.module.css";

const Main = ({
  image,
  children,
  reverse = false,
  id,
}: {
  image: string | StaticImageData;
  children: ReactNode;
  id?: string;
  reverse?: boolean;
}) => {
  return (
    <VisibilitySensor partialVisibility>
      {({ isVisible }: { isVisible: boolean }) => (
        <Grid
          container
          spacing={1}
          sx={{ paddingTop: "120px", paddingBottom: "120px" }}
          direction={reverse ? "row-reverse" : "row"}
          id={id}
        >
          <Fade timeout={2000} in={isVisible}>
            <Grid
              item
              xs={12}
              md={6}
              sx={{
                display: "flex",
                justifyContent: "center",
                alignItems: "center",
              }}
            >
              <Image
                src={image}
                placeholder="blur"
                alt="PCSHS School Image"
                width="600"
                height="420"
                className={styles.mainImage}
              />
            </Grid>
          </Fade>

          <Fade timeout={2000} in={isVisible}>
            <Grid
              item
              xs={12}
              md={6}
              sx={{
                flexDirection: "column",
                display: "flex",
                justifyContent: "center",
                alignItems: "center",
              }}
              pr={4}
              pl={4}
            >
              {children}
            </Grid>
          </Fade>
        </Grid>
      )}
    </VisibilitySensor>
  );
};

const About = () => {
  const theme = useTheme();
  const sm = useMediaQuery(theme.breakpoints.down("md"));
  return (
    <>
      <Head>
        <title>About PCSHS</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <video autoPlay muted loop id="myVideo" className={styles.pcshsVideo}>
        <source
          src="https://video.wixstatic.com/video/99a79f_546d779f086f41469f6612347b2c6581/1080p/mp4/file.mp4"
          type="video/mp4"
        />
        Your browser does not support HTML5 video.
      </video>

      <Box className={styles.mainBgImage}>
        <Box className={styles.blurBox}>
          <Container>
            <Main image={Vision} id="vision">
              <Typography
                variant={sm ? "h5" : "h3"}
                align="center"
                sx={{ marginBottom: "16px" }}
              >
                Our Vision
              </Typography>
              <Typography
                paragraph
                align="center"
                variant={sm ? "body1" : "h5"}
              >
                PASIG CITY SCIENCE HIGH SCHOOL (PCSHS) is envisioned to be a
                world class institution that is globally and locally competitive
                and responsive to the ever-changing needs of the times,
                especially in the fields of Science and Technology.
              </Typography>
            </Main>

            <Main image={Mission} reverse={true} id="mission">
              <Typography
                variant={sm ? "h5" : "h3"}
                align="center"
                sx={{ marginBottom: "16px" }}
              >
                Our Mission
              </Typography>
              <Typography
                paragraph
                align="center"
                variant={sm ? "body1" : "h5"}
              >
                PCSHS&apos; mission is to fully develop well-rounded, science
                and technology-oriented students, nurturing and gender-sensitive
                persons, and future leaders with a vision for excellence.
              </Typography>
            </Main>
          </Container>
        </Box>
      </Box>

      <Box id="objectives">
        <Container>
          <Typography
            align="center"
            variant="h3"
            pt={24}
            mb={16}
            sx={{ color: "black" }}
          >
            Our Objectives
          </Typography>

          <Objectives />
        </Container>
      </Box>

      <Box className={styles.historyBgImage} id="history">
        <Box className={styles.blurBox}>
          <Container>
            <Typography align="center" variant="h3" pt={24} mb={8}>
              Our History
            </Typography>

            <VisibilitySensor partialVisibility>
              {({ isVisible }: { isVisible: boolean }) => (
                <Fade in={isVisible} timeout={1000}>
                  <Box overflow="auto">
                    <History />
                  </Box>
                </Fade>
              )}
            </VisibilitySensor>
          </Container>
        </Box>
      </Box>

      <ContactUs />
    </>
  );
};

export default About;
